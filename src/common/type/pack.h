/***********************************************************************************************************************************
Pack Handler
***********************************************************************************************************************************/
#ifndef COMMON_TYPE_PACK_H
#define COMMON_TYPE_PACK_H

/***********************************************************************************************************************************
Minimum number of extra bytes to allocate for packs that are growing or are likely to grow
***********************************************************************************************************************************/
#ifndef PACK_EXTRA_MIN
    #define PACK_EXTRA_MIN                                          64
#endif

/***********************************************************************************************************************************
Object type
***********************************************************************************************************************************/
#define PACK_TYPE                                                   Pack
#define PACK_PREFIX                                                 pck

typedef struct Pack Pack;

#include "common/type/string.h"

/***********************************************************************************************************************************
Pack type
***********************************************************************************************************************************/
typedef enum
{
    pckTypeBinary = 1,
    pckTypeBool,
    pckTypeInt64,
    pckTypeList,
    pckTypeObject,
    pckTypeString,
    pckTypeUInt64,
} PackType;

/***********************************************************************************************************************************
Constructors
***********************************************************************************************************************************/
Pack *pckNew(void);

/***********************************************************************************************************************************
Functions
***********************************************************************************************************************************/

/***********************************************************************************************************************************
Getters/Setters
***********************************************************************************************************************************/

/***********************************************************************************************************************************
Destructor
***********************************************************************************************************************************/
void pckFree(Pack *this);

/***********************************************************************************************************************************
Macros for function logging
***********************************************************************************************************************************/
String *pckToLog(const Pack *this);

#define FUNCTION_LOG_PACK_TYPE                                                                                                     \
    Pack *
#define FUNCTION_LOG_PACK_FORMAT(value, buffer, bufferSize)                                                                        \
    FUNCTION_LOG_STRING_OBJECT_FORMAT(value, pckToLog, buffer, bufferSize)

#endif
